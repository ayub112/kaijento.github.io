<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/stylesheets/shiori.css">
    <link rel="canonical" href="http://kaijento.github.io/2017/03/30/BeautifulSoup-Removing-tags/">
    <link rel="shortcut icon" href="/favicon.ico">
    <title>BeautifulSoup: Removing tags | Shiori</title>
    
  </head>
  <body>

    <div class="navbar navbar-default navbar-static-top">

      <div class="container">
        <div class="navbar-header">
          <a href="/" class="navbar-brand">Shiori</a>
        </div>
        <div>
            <ul class="navbar-nav nav">
            <li><a href="/archive/">articles</a></li>
<li><a href="/categories/">categories</a></li>
<li><a href="/me/">me</a></li>
<li><a href="/feed.xml">rss</a></li>

          </ul>
          <ul class="navbar-nav nav navbar-right">
            <li><a href="https://twitter.com/kaijento">@kaijento</a></li>
<li><a href="https://github.com/kaijento">
    <svg height="18" viewBox="0 0 16 16" class="octicon-mark-github" version="1.1" width="24"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
  </a>
</li>

          </ul>
        </div>
      </div>
    </div>
    
    <div class="container post-body">
    
      <div class="row">
        
          <div class="col-sm-12">
            <div class="post-header">
  <!-- Emoji is not available outside markdown files, so using "include ribbon.html" instead -->
<img class="emoji" title=":ribbon:" alt=":ribbon:" src="/img/1f380.png" height="20" width="20" align="absmiddle">

  <h1 class="post-title-main"><a href="/2017/03/30/BeautifulSoup-Removing-tags/">BeautifulSoup: Removing tags</a></h1>
  <p class="text-muted">30 Mar 2017</p>

<p class="text-right preview">
  
    
  <a href="/categories/python/">python</a>
  
    
  <a href="/categories/beautifulsoup/">beautifulsoup</a>
  
    
  <a href="/categories/webscraping/">webscraping</a>
  
    
  <a href="/categories/csv/">csv</a>
  
</p>


</div>
<div class="post-content">
  <p>The task is to extract the Nominal GDP sector composition table from the
<a href="https://en.wikipedia.org/wiki/List_of_countries_by_GDP_sector_composition">List_of_countries_by_GDP_sector_composition wikipedia page</a>
and convert it to CSV using Python.</p>

<p><img src="/img/1490852842-gdp-sector.png" alt="" /></p>

<p>We’ll use <code class="highlighter-rouge">requests</code> for the fetching and <code class="highlighter-rouge">BeautifulSoup</code> for the parsing:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">csv</span><span class="o">,</span> <span class="nn">json</span><span class="o">,</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">sys</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span>   <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="o">&gt;&gt;&gt;</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">url</span>  <span class="o">=</span> <span class="s">'https://en.wikipedia.org/wiki/List_of_countries_by_GDP_sector_composition'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">r</span>    <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">'html5lib'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">row</span> <span class="o">=</span> <span class="p">[</span> <span class="n">td</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">td</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s">'tr'</span><span class="p">)[</span><span class="mi">2</span><span class="p">](</span><span class="s">'td'</span><span class="p">)</span> <span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
<span class="p">[</span>
    <span class="s">"1"</span><span class="p">,</span> 
    <span class="s">"</span><span class="se">\u00a0</span><span class="s">United States"</span><span class="p">,</span> 
    <span class="s">"7007179469960000000</span><span class="se">\u2660</span><span class="s">17,946,996"</span><span class="p">,</span> 
    <span class="s">"1.12</span><span class="si">%</span><span class="s">"</span><span class="p">,</span> 
    <span class="s">"19.1</span><span class="si">%</span><span class="s">"</span><span class="p">,</span> 
    <span class="s">"79.7</span><span class="si">%</span><span class="s">"</span><span class="p">,</span> 
    <span class="s">"7005215364000000000</span><span class="se">\u2660</span><span class="s">215,364"</span><span class="p">,</span> 
    <span class="s">"7006342787600000000</span><span class="se">\u2660</span><span class="s">3,427,876"</span><span class="p">,</span> 
    <span class="s">"7007143037560000000</span><span class="se">\u2660</span><span class="s">14,303,756"</span>
<span class="p">]</span>
</code></pre>
</div>

<a name="find-without-find"></a>
<h2 class="section-header">
  <span id="find-without-find"></span>
  <a class="anchor" href="#find-without-find">find without find()</a>
</h2>

<p>The table we are after is the first <code class="highlighter-rouge">&lt;table&gt;</code> tag on the page so we can use <code class="highlighter-rouge">soup.find('table')</code>
to find it.</p>

<p><code class="highlighter-rouge">BeautifulSoup</code> has some “shorthand” syntax for simple cases of <code class="highlighter-rouge">find()</code> and <code class="highlighter-rouge">find_all()</code>:</p>

<ul>
  <li><code class="highlighter-rouge">soup.tag</code> is the same as <code class="highlighter-rouge">soup.find('tag')</code></li>
  <li><code class="highlighter-rouge">soup('tag')</code> is the same as <code class="highlighter-rouge">soup.find_all('tag')</code></li>
</ul>

<p>This means that:</p>

<p><code class="highlighter-rouge">soup.table('tr')[2]('td')</code></p>

<p>is equivalent to:</p>

<p><code class="highlighter-rouge">soup.find('table').find_all('tr')[2].find_all('td')</code></p>

<p>Note that the find methods aren’t only called on the <code class="highlighter-rouge">BeautifulSoup</code> object.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">table</span><span class="p">)</span>
<span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">bs4</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">Tag</span><span class="s">'&gt;</span><span class="err">
</span></code></pre>
</div>

<p>They can be called on <code class="highlighter-rouge">Tag</code> objects too to search from a particular starting point:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">soup</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">'a'</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"/wiki/List_of_countries_by_GDP_(nominal)"</span> <span class="n">title</span><span class="o">=</span><span class="s">"List of countries by GDP (nominal)"</span><span class="o">&gt;</span><span class="n">nominal</span> <span class="n">GDP</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">soup</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">a</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"/wiki/List_of_countries_by_GDP_(nominal)"</span> <span class="n">title</span><span class="o">=</span><span class="s">"List of countries by GDP (nominal)"</span><span class="o">&gt;</span><span class="n">nominal</span> <span class="n">GDP</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
</code></pre>
</div>

<p>So the first <code class="highlighter-rouge">&lt;tr&gt;</code> in the <code class="highlighter-rouge">&lt;table&gt;</code> contains the header names and the second contains
the totals so the data we want starts in the third row, hence the <code class="highlighter-rouge">[2]</code>.</p>

<p>The <code class="highlighter-rouge">[ td.text for td ... ]</code> syntax is called a <strong>List Comprehension</strong>. It’s as if we did:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="n">row</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">td</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s">'tr'</span><span class="p">)[</span><span class="mi">2</span><span class="p">](</span><span class="s">'td'</span><span class="p">):</span>
    <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre>
</div>

<p>Finally we’re using <code class="highlighter-rouge">json.dumps(..., indent=4)</code> to pretty-print the resulting list for
formatting purposes.</p>

<a name="prettify"></a>
<h2 class="section-header">
  <span id="prettify"></span>
  <a class="anchor" href="#prettify">prettify()</a>
</h2>

<p>So what is all of this extra data we’re seeing? Let’s inspect the contents of the <code class="highlighter-rouge">&lt;tr&gt;</code> tag:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s">'tr'</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">prettify</span><span class="p">())</span>
<span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
  <span class="mi">1</span>
 <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s">"flagicon"</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">img</span> <span class="n">alt</span><span class="o">=</span><span class="s">""</span> <span class="n">class</span><span class="o">=</span><span class="s">"thumbborder"</span> <span class="n">data</span><span class="o">-</span><span class="nb">file</span><span class="o">-</span><span class="n">height</span><span class="o">=</span><span class="s">"650"</span> <span class="n">data</span><span class="o">-</span><span class="nb">file</span><span class="o">-</span><span class="n">width</span><span class="o">=</span><span class="s">"1235"</span> <span class="n">height</span><span class="o">=</span><span class="s">"12"</span> <span class="n">src</span><span class="o">=</span><span class="s">"//upload.wikimedia.org/wikipedia/en/thumb/a/a4/Flag_of_the_United_States.svg/23px-Flag_of_the_United_States.svg.png"</span> <span class="n">srcset</span><span class="o">=</span><span class="s">"//upload.wikimedia.org/wikipedia/en/thumb/a/a4/Flag_of_the_United_States.svg/35px-Flag_of_the_United_States.svg.png 1.5x, //upload.wikimedia.org/wikipedia/en/thumb/a/a4/Flag_of_the_United_States.svg/46px-Flag_of_the_United_States.svg.png 2x"</span> <span class="n">width</span><span class="o">=</span><span class="s">"23"</span><span class="o">/&gt;</span>
  <span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"/wiki/United_States"</span> <span class="n">title</span><span class="o">=</span><span class="s">"United States"</span><span class="o">&gt;</span>
   <span class="n">United</span> <span class="n">States</span>
  <span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
 <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s">"sortkey"</span> <span class="n">style</span><span class="o">=</span><span class="s">"display:none"</span><span class="o">&gt;</span>
   <span class="mi">7007179469960000000</span><span class="err">♠</span>
  <span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
  <span class="mi">17</span><span class="p">,</span><span class="mi">946</span><span class="p">,</span><span class="mi">996</span>
 <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
  <span class="mf">1.12</span><span class="o">%</span>
 <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
  <span class="mf">19.1</span><span class="o">%</span>
 <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
  <span class="mf">79.7</span><span class="o">%</span>
 <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s">"sortkey"</span> <span class="n">style</span><span class="o">=</span><span class="s">"display:none"</span><span class="o">&gt;</span>
   <span class="mi">7005215364000000000</span><span class="err">♠</span>
  <span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
  <span class="mi">215</span><span class="p">,</span><span class="mi">364</span>
 <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s">"sortkey"</span> <span class="n">style</span><span class="o">=</span><span class="s">"display:none"</span><span class="o">&gt;</span>
   <span class="mi">7006342787600000000</span><span class="err">♠</span>
  <span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
  <span class="mi">3</span><span class="p">,</span><span class="mi">427</span><span class="p">,</span><span class="mi">876</span>
 <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
 <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s">"sortkey"</span> <span class="n">style</span><span class="o">=</span><span class="s">"display:none"</span><span class="o">&gt;</span>
   <span class="mi">7007143037560000000</span><span class="err">♠</span>
  <span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
  <span class="mi">14</span><span class="p">,</span><span class="mi">303</span><span class="p">,</span><span class="mi">756</span>
 <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
</code></pre>
</div>

<p>Okay so we have these extra <code class="highlighter-rouge">&lt;span&gt;</code> tags that we do not need. In certain situations
instead of matching what you do want it can be simpler to remove what
you do not want. To remove a tag using <code class="highlighter-rouge">BeautifulSoup</code> there are 2 options: 
<code class="highlighter-rouge">extract()</code> and <code class="highlighter-rouge">decompose()</code>.</p>

<a name="decompose"></a>
<h2 class="section-header">
  <span id="decompose"></span>
  <a class="anchor" href="#decompose">decompose()</a>
</h2>

<p><code class="highlighter-rouge">extract()</code> will return that tag that has been removed and <code class="highlighter-rouge">decompose()</code> will destroy
it. We would like to remove all of the <code class="highlighter-rouge">&lt;span&gt;</code> tags and destroy them so we will use
<code class="highlighter-rouge">decompose()</code>:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">tr</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s">'tr'</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">span</span> <span class="ow">in</span> <span class="n">tr</span><span class="p">(</span><span class="s">'span'</span><span class="p">):</span>
<span class="o">...</span>     <span class="n">span</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span>
<span class="o">...</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span> <span class="n">td</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">td</span> <span class="ow">in</span> <span class="n">tr</span><span class="p">(</span><span class="s">'td'</span><span class="p">)</span> <span class="p">]</span>
<span class="p">[</span><span class="s">u'1'</span><span class="p">,</span> <span class="s">u'United States'</span><span class="p">,</span> <span class="s">u'17,946,996'</span><span class="p">,</span> <span class="s">u'1.12</span><span class="si">%</span><span class="s">'</span><span class="p">,</span> <span class="s">u'19.1</span><span class="si">%</span><span class="s">'</span><span class="p">,</span> <span class="s">u'79.7</span><span class="si">%</span><span class="s">'</span><span class="p">,</span> <span class="s">u'215,364'</span><span class="p">,</span> <span class="s">u'3,427,876'</span><span class="p">,</span> <span class="s">u'14,303,756'</span><span class="p">]</span>
</code></pre>
</div>

<p>So we’re done? Well not quite:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span> <span class="n">td</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">td</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s">'tr'</span><span class="p">)[</span><span class="mi">27</span><span class="p">](</span><span class="s">'td'</span><span class="p">)</span> <span class="p">]</span>
<span class="p">[</span><span class="s">u'26'</span><span class="p">,</span> <span class="s">u'Nigeria'</span><span class="p">,</span> <span class="s">u'415,080'</span><span class="p">,</span> <span class="s">u'17.8</span><span class="si">%</span><span class="s">'</span><span class="p">,</span> <span class="s">u'25.7</span><span class="si">%</span><span class="s">'</span><span class="p">,</span> <span class="s">u'54.6</span><span class="si">%</span><span class="s">'</span><span class="p">,</span> <span class="s">u'73,884'</span><span class="p">,</span> <span class="s">u'106,676'</span><span class="p">,</span> <span class="s">u'226,634[1]'</span><span class="p">]</span>
</code></pre>
</div>

<p>What is this <code class="highlighter-rouge">[1]</code>?</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">soup</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s">'tr'</span><span class="p">)[</span><span class="mi">27</span><span class="p">](</span><span class="s">'td'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="mi">226</span><span class="p">,</span><span class="mi">634</span><span class="o">&lt;</span><span class="n">sup</span> <span class="n">class</span><span class="o">=</span><span class="s">"reference"</span> <span class="nb">id</span><span class="o">=</span><span class="s">"cite_ref-Product_Report_NBS_1-0"</span><span class="o">&gt;&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"#cite_note-Product_Report_NBS-1"</span><span class="o">&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;/</span><span class="n">sup</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
</code></pre>
</div>

<p>It’s a citation link inside an <code class="highlighter-rouge">&lt;a&gt;</code> tag contained in a <code class="highlighter-rouge">&lt;sup&gt;</code> tag. This means that
instead of removing just <code class="highlighter-rouge">&lt;span&gt;</code> tags we want to also remove all <code class="highlighter-rouge">&lt;sup&gt;</code> tags.</p>

<a name="find_alllist"></a>
<h2 class="section-header">
  <span id="find_alllist"></span>
  <a class="anchor" href="#find_alllist">find_all(list)</a>
</h2>

<p><code class="highlighter-rouge">find_all()</code> also accepts a list meaning that we can use <code class="highlighter-rouge">find_all(['span', 'sup'])</code>
or the shorthand syntax of <code class="highlighter-rouge">soup(['span', 'sup'])</code> to find all of them.</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s">'tr'</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]:</span>
<span class="o">...</span>     <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tr</span><span class="p">([</span><span class="s">'span'</span><span class="p">,</span> <span class="s">'sup'</span><span class="p">]):</span>
<span class="o">...</span>         <span class="n">tag</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span>
<span class="o">...</span>     <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span> <span class="n">td</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">td</span> <span class="ow">in</span> <span class="n">tr</span><span class="p">(</span><span class="s">'td'</span><span class="p">)</span> <span class="p">])</span>
<span class="o">...</span> 
<span class="mi">1</span><span class="p">,</span><span class="n">United</span> <span class="n">States</span><span class="p">,</span><span class="s">"17,946,996"</span><span class="p">,</span><span class="mf">1.12</span><span class="o">%</span><span class="p">,</span><span class="mf">19.1</span><span class="o">%</span><span class="p">,</span><span class="mf">79.7</span><span class="o">%</span><span class="p">,</span><span class="s">"215,364"</span><span class="p">,</span><span class="s">"3,427,876"</span><span class="p">,</span><span class="s">"14,303,756"</span>
<span class="mi">2</span><span class="p">,</span><span class="n">China</span><span class="p">,</span><span class="s">"11,007,721"</span><span class="p">,</span><span class="mf">9.0</span><span class="o">%</span><span class="p">,</span><span class="mf">40.5</span><span class="o">%</span><span class="p">,</span><span class="mf">50.5</span><span class="o">%</span><span class="p">,</span><span class="s">"990,695"</span><span class="p">,</span><span class="s">"4,458,127"</span><span class="p">,</span><span class="s">"5,558,899"</span>
<span class="mi">3</span><span class="p">,</span><span class="n">Japan</span><span class="p">,</span><span class="s">"4,730,300"</span><span class="p">,</span><span class="mf">1.2</span><span class="o">%</span><span class="p">,</span><span class="mf">27.5</span><span class="o">%</span><span class="p">,</span><span class="mf">71.4</span><span class="o">%</span><span class="p">,</span><span class="s">"56,764"</span><span class="p">,</span><span class="s">"1,300,833"</span><span class="p">,</span><span class="s">"3,377,434"</span>
<span class="mi">4</span><span class="p">,</span><span class="n">Germany</span><span class="p">,</span><span class="s">"3,494,900"</span><span class="p">,</span><span class="mf">0.8</span><span class="o">%</span><span class="p">,</span><span class="mf">28.1</span><span class="o">%</span><span class="p">,</span><span class="mf">71.1</span><span class="o">%</span><span class="p">,</span><span class="s">"27,959"</span><span class="p">,</span><span class="s">"982,067"</span><span class="p">,</span><span class="s">"2,484,874"</span>
<span class="mi">5</span><span class="p">,</span><span class="n">United</span> <span class="n">Kingdom</span><span class="p">,</span><span class="s">"2,649,890"</span><span class="p">,</span><span class="mf">0.7</span><span class="o">%</span><span class="p">,</span><span class="mi">21</span><span class="o">%</span><span class="p">,</span><span class="mf">78.3</span><span class="o">%</span><span class="p">,</span><span class="s">"18,549"</span><span class="p">,</span><span class="s">"556,477"</span><span class="p">,</span><span class="s">"2,074,864"</span>
<span class="mi">6</span><span class="p">,</span><span class="n">France</span><span class="p">,</span><span class="s">"2,488,280"</span><span class="p">,</span><span class="mf">1.9</span><span class="o">%</span><span class="p">,</span><span class="mf">18.3</span><span class="o">%</span><span class="p">,</span><span class="mf">79.8</span><span class="o">%</span><span class="p">,</span><span class="s">"47,277"</span><span class="p">,</span><span class="s">"455,355"</span><span class="p">,</span><span class="s">"1,985,647"</span>
<span class="mi">7</span><span class="p">,</span><span class="n">India</span><span class="p">,</span><span class="s">"2,250,990"</span><span class="p">,</span><span class="mf">17.4</span><span class="o">%</span><span class="p">,</span><span class="mf">25.8</span><span class="o">%</span><span class="p">,</span><span class="mf">56.9</span><span class="o">%</span><span class="p">,</span><span class="s">"391,672"</span><span class="p">,</span><span class="s">"580,755"</span><span class="p">,</span><span class="s">"1,280,813"</span>
<span class="mi">8</span><span class="p">,</span><span class="n">Italy</span><span class="p">,</span><span class="s">"1,852,500"</span><span class="p">,</span><span class="mi">2</span><span class="o">%</span><span class="p">,</span><span class="mf">24.2</span><span class="o">%</span><span class="p">,</span><span class="mf">73.8</span><span class="o">%</span><span class="p">,</span><span class="s">"37,050"</span><span class="p">,</span><span class="s">"448,305"</span><span class="p">,</span><span class="s">"1,367,145"</span>
<span class="mi">9</span><span class="p">,</span><span class="n">Brazil</span><span class="p">,</span><span class="s">"1,769,600"</span><span class="p">,</span><span class="mf">5.4</span><span class="o">%</span><span class="p">,</span><span class="mf">27.4</span><span class="o">%</span><span class="p">,</span><span class="mf">67.2</span><span class="o">%</span><span class="p">,</span><span class="s">"95,558"</span><span class="p">,</span><span class="s">"484,870"</span><span class="p">,</span><span class="s">"1,189,171"</span>
<span class="mi">10</span><span class="p">,</span><span class="n">Canada</span><span class="p">,</span><span class="s">"1,532,340"</span><span class="p">,</span><span class="mf">1.8</span><span class="o">%</span><span class="p">,</span><span class="mf">28.6</span><span class="o">%</span><span class="p">,</span><span class="mf">69.6</span><span class="o">%</span><span class="p">,</span><span class="s">"27,582"</span><span class="p">,</span><span class="s">"438,249"</span><span class="p">,</span><span class="s">"1,066,509"</span>
<span class="mi">11</span><span class="p">,</span><span class="n">South</span> <span class="n">Korea</span><span class="p">,</span><span class="s">"1,404,380"</span><span class="p">,</span><span class="mf">2.7</span><span class="o">%</span><span class="p">,</span><span class="mf">39.8</span><span class="o">%</span><span class="p">,</span><span class="mf">57.5</span><span class="o">%</span><span class="p">,</span><span class="s">"37,918"</span><span class="p">,</span><span class="s">"558,943"</span><span class="p">,</span><span class="s">"807,519"</span>
<span class="mi">12</span><span class="p">,</span><span class="n">Russia</span><span class="p">,</span><span class="s">"1,267,750"</span><span class="p">,</span><span class="mf">3.9</span><span class="o">%</span><span class="p">,</span><span class="mi">36</span><span class="o">%</span><span class="p">,</span><span class="mf">60.1</span><span class="o">%</span><span class="p">,</span><span class="s">"49,442"</span><span class="p">,</span><span class="s">"456,390"</span><span class="p">,</span><span class="s">"761,918"</span>
<span class="mi">13</span><span class="p">,</span><span class="n">Australia</span><span class="p">,</span><span class="s">"1,256,640"</span><span class="p">,</span><span class="mi">4</span><span class="o">%</span><span class="p">,</span><span class="mf">26.6</span><span class="o">%</span><span class="p">,</span><span class="mf">69.4</span><span class="o">%</span><span class="p">,</span><span class="s">"50,266"</span><span class="p">,</span><span class="s">"334,266"</span><span class="p">,</span><span class="s">"872,108"</span>
<span class="mi">14</span><span class="p">,</span><span class="n">Spain</span><span class="p">,</span><span class="s">"1,252,160"</span><span class="p">,</span><span class="mf">3.3</span><span class="o">%</span><span class="p">,</span><span class="mf">24.2</span><span class="o">%</span><span class="p">,</span><span class="mf">72.6</span><span class="o">%</span><span class="p">,</span><span class="s">"41,321"</span><span class="p">,</span><span class="s">"303,023"</span><span class="p">,</span><span class="s">"909,068"</span>
<span class="mi">15</span><span class="p">,</span><span class="n">Mexico</span><span class="p">,</span><span class="s">"1,063,610"</span><span class="p">,</span><span class="mf">3.7</span><span class="o">%</span><span class="p">,</span><span class="mf">34.2</span><span class="o">%</span><span class="p">,</span><span class="mf">62.1</span><span class="o">%</span><span class="p">,</span><span class="s">"39,354"</span><span class="p">,</span><span class="s">"363,755"</span><span class="p">,</span><span class="s">"660,502"</span>
<span class="mi">16</span><span class="p">,</span><span class="n">Indonesia</span><span class="p">,</span><span class="s">"940,953"</span><span class="p">,</span><span class="mf">14.3</span><span class="o">%</span><span class="p">,</span><span class="mf">46.9</span><span class="o">%</span><span class="p">,</span><span class="mf">38.8</span><span class="o">%</span><span class="p">,</span><span class="s">"134,556"</span><span class="p">,</span><span class="s">"441,307"</span><span class="p">,</span><span class="s">"365,090"</span>
<span class="mi">17</span><span class="p">,</span><span class="n">Netherlands</span><span class="p">,</span><span class="s">"769,930"</span><span class="p">,</span><span class="mf">2.8</span><span class="o">%</span><span class="p">,</span><span class="mf">24.1</span><span class="o">%</span><span class="p">,</span><span class="mf">73.2</span><span class="o">%</span><span class="p">,</span><span class="s">"21,558"</span><span class="p">,</span><span class="s">"185,553"</span><span class="p">,</span><span class="s">"563,589"</span>
<span class="mi">18</span><span class="p">,</span><span class="n">Turkey</span><span class="p">,</span><span class="s">"755,716"</span><span class="p">,</span><span class="mf">8.9</span><span class="o">%</span><span class="p">,</span><span class="mf">28.1</span><span class="o">%</span><span class="p">,</span><span class="mi">63</span><span class="o">%</span><span class="p">,</span><span class="s">"67,259"</span><span class="p">,</span><span class="s">"212,356"</span><span class="p">,</span><span class="s">"476,101"</span>
<span class="mi">19</span><span class="p">,</span><span class="n">Switzerland</span><span class="p">,</span><span class="s">"662,483"</span><span class="p">,</span><span class="mf">1.3</span><span class="o">%</span><span class="p">,</span><span class="mf">27.7</span><span class="o">%</span><span class="p">,</span><span class="mi">71</span><span class="o">%</span><span class="p">,</span><span class="s">"8,612"</span><span class="p">,</span><span class="s">"183,508"</span><span class="p">,</span><span class="s">"470,363"</span>
<span class="mi">20</span><span class="p">,</span><span class="n">Saudi</span> <span class="n">Arabia</span><span class="p">,</span><span class="s">"657,785"</span><span class="p">,</span><span class="mi">2</span><span class="o">%</span><span class="p">,</span><span class="mf">66.9</span><span class="o">%</span><span class="p">,</span><span class="mf">31.1</span><span class="o">%</span><span class="p">,</span><span class="s">"13,156"</span><span class="p">,</span><span class="s">"440,058"</span><span class="p">,</span><span class="s">"204,571"</span>
<span class="mi">21</span><span class="p">,</span><span class="n">Argentina</span><span class="p">,</span><span class="s">"541,784"</span><span class="p">,</span><span class="mi">10</span><span class="o">%</span><span class="p">,</span><span class="mf">30.7</span><span class="o">%</span><span class="p">,</span><span class="mf">59.2</span><span class="o">%</span><span class="p">,</span><span class="s">"54,178"</span><span class="p">,</span><span class="s">"166,328"</span><span class="p">,</span><span class="s">"320,736"</span>
<span class="mi">22</span><span class="p">,</span><span class="n">Taiwan</span><span class="p">,</span><span class="s">"519,149"</span><span class="p">,</span><span class="mf">1.3</span><span class="o">%</span><span class="p">,</span><span class="mi">32</span><span class="o">%</span><span class="p">,</span><span class="mf">66.9</span><span class="o">%</span><span class="p">,</span><span class="s">"6,749"</span><span class="p">,</span><span class="s">"166,128"</span><span class="p">,</span><span class="s">"347,311"</span>
<span class="mi">23</span><span class="p">,</span><span class="n">Sweden</span><span class="p">,</span><span class="s">"517,440"</span><span class="p">,</span><span class="mf">1.8</span><span class="o">%</span><span class="p">,</span><span class="mf">26.9</span><span class="o">%</span><span class="p">,</span><span class="mf">71.3</span><span class="o">%</span><span class="p">,</span><span class="s">"9,314"</span><span class="p">,</span><span class="s">"139,191"</span><span class="p">,</span><span class="s">"368,935"</span>
<span class="mi">24</span><span class="p">,</span><span class="n">Belgium</span><span class="p">,</span><span class="s">"470,179"</span><span class="p">,</span><span class="mf">0.7</span><span class="o">%</span><span class="p">,</span><span class="mf">21.6</span><span class="o">%</span><span class="p">,</span><span class="mf">77.7</span><span class="o">%</span><span class="p">,</span><span class="s">"3,291"</span><span class="p">,</span><span class="s">"101,559"</span><span class="p">,</span><span class="s">"365,329"</span>
<span class="mi">25</span><span class="p">,</span><span class="n">Poland</span><span class="p">,</span><span class="s">"467,350"</span><span class="p">,</span><span class="mf">3.4</span><span class="o">%</span><span class="p">,</span><span class="mf">33.6</span><span class="o">%</span><span class="p">,</span><span class="mi">63</span><span class="o">%</span><span class="p">,</span><span class="s">"15,890"</span><span class="p">,</span><span class="s">"157,030"</span><span class="p">,</span><span class="s">"294,431"</span>
<span class="mi">26</span><span class="p">,</span><span class="n">Nigeria</span><span class="p">,</span><span class="s">"415,080"</span><span class="p">,</span><span class="mf">17.8</span><span class="o">%</span><span class="p">,</span><span class="mf">25.7</span><span class="o">%</span><span class="p">,</span><span class="mf">54.6</span><span class="o">%</span><span class="p">,</span><span class="s">"73,884"</span><span class="p">,</span><span class="s">"106,676"</span><span class="p">,</span><span class="s">"226,634"</span>
<span class="mi">27</span><span class="p">,</span><span class="n">Iran</span><span class="p">,</span><span class="s">"412,340"</span><span class="p">,</span><span class="mf">11.2</span><span class="o">%</span><span class="p">,</span><span class="mf">40.6</span><span class="o">%</span><span class="p">,</span><span class="mf">48.2</span><span class="o">%</span><span class="p">,</span><span class="s">"46,182"</span><span class="p">,</span><span class="s">"167,410"</span><span class="p">,</span><span class="s">"198,748"</span>
<span class="mi">28</span><span class="p">,</span><span class="n">Thailand</span><span class="p">,</span><span class="s">"390,592"</span><span class="p">,</span><span class="mf">13.3</span><span class="o">%</span><span class="p">,</span><span class="mi">34</span><span class="o">%</span><span class="p">,</span><span class="mf">52.7</span><span class="o">%</span><span class="p">,</span><span class="s">"51,949"</span><span class="p">,</span><span class="s">"132,801"</span><span class="p">,</span><span class="s">"205,842"</span>
<span class="mi">29</span><span class="p">,</span><span class="n">Austria</span><span class="p">,</span><span class="s">"387,299"</span><span class="p">,</span><span class="mf">1.5</span><span class="o">%</span><span class="p">,</span><span class="mf">29.5</span><span class="o">%</span><span class="p">,</span><span class="mi">69</span><span class="o">%</span><span class="p">,</span><span class="s">"5,809"</span><span class="p">,</span><span class="s">"114,253"</span><span class="p">,</span><span class="s">"267,236"</span>
<span class="mi">30</span><span class="p">,</span><span class="n">Norway</span><span class="p">,</span><span class="s">"376,268"</span><span class="p">,</span><span class="mf">2.7</span><span class="o">%</span><span class="p">,</span><span class="mf">38.3</span><span class="o">%</span><span class="p">,</span><span class="mi">59</span><span class="o">%</span><span class="p">,</span><span class="s">"10,159"</span><span class="p">,</span><span class="s">"144,111"</span><span class="p">,</span><span class="s">"221,998"</span>
<span class="mi">31</span><span class="p">,</span><span class="n">United</span> <span class="n">Arab</span> <span class="n">Emirates</span><span class="p">,</span><span class="s">"416,444"</span><span class="p">,</span><span class="mf">0.7</span><span class="o">%</span><span class="p">,</span><span class="mf">59.4</span><span class="o">%</span><span class="p">,</span><span class="mf">39.8</span><span class="o">%</span><span class="p">,</span><span class="s">"2,915"</span><span class="p">,</span><span class="s">"247,368"</span><span class="p">,</span><span class="s">"165,745"</span>
<span class="mi">32</span><span class="p">,</span><span class="n">Colombia</span><span class="p">,</span><span class="s">"400,117"</span><span class="p">,</span><span class="mf">8.9</span><span class="o">%</span><span class="p">,</span><span class="mi">38</span><span class="o">%</span><span class="p">,</span><span class="mf">53.1</span><span class="o">%</span><span class="p">,</span><span class="s">"35,610"</span><span class="p">,</span><span class="s">"152,044"</span><span class="p">,</span><span class="s">"212,462"</span>
<span class="mi">33</span><span class="p">,</span><span class="n">Denmark</span><span class="p">,</span><span class="s">"347,196"</span><span class="p">,</span><span class="mf">4.5</span><span class="o">%</span><span class="p">,</span><span class="mf">19.1</span><span class="o">%</span><span class="p">,</span><span class="mf">76.4</span><span class="o">%</span><span class="p">,</span><span class="s">"15,624"</span><span class="p">,</span><span class="s">"66,314"</span><span class="p">,</span><span class="s">"265,258"</span>
<span class="mi">34</span><span class="p">,</span><span class="n">South</span> <span class="n">Africa</span><span class="p">,</span><span class="s">"341,216"</span><span class="p">,</span><span class="mf">2.5</span><span class="o">%</span><span class="p">,</span><span class="mf">31.6</span><span class="o">%</span><span class="p">,</span><span class="mf">65.9</span><span class="o">%</span><span class="p">,</span><span class="s">"8,530"</span><span class="p">,</span><span class="s">"107,824"</span><span class="p">,</span><span class="s">"224,861"</span>
<span class="mi">35</span><span class="p">,</span><span class="n">Algeria</span><span class="p">,</span><span class="s">"246,397"</span><span class="p">,</span><span class="mf">3.3</span><span class="o">%</span><span class="p">,</span><span class="mf">17.9</span><span class="o">%</span><span class="p">,</span><span class="mf">78.9</span><span class="o">%</span><span class="p">,</span><span class="s">"8,131"</span><span class="p">,</span><span class="s">"44,105"</span><span class="p">,</span><span class="s">"194,407"</span>
<span class="mi">36</span><span class="p">,</span><span class="n">Venezuela</span><span class="p">,</span><span class="s">"209,226"</span><span class="p">,</span><span class="mf">4.7</span><span class="o">%</span><span class="p">,</span><span class="mf">34.9</span><span class="o">%</span><span class="p">,</span><span class="mf">60.4</span><span class="o">%</span><span class="p">,</span><span class="s">"9,834"</span><span class="p">,</span><span class="s">"73,020"</span><span class="p">,</span><span class="s">"126,373"</span>
</code></pre>
</div>

<p>Full code is available <a href="https://github.com/kaijento/code/blob/master/webscraping/wikipedia.com/gdp-table-to-csv.py">on github</a>.</p>

</div>

  
    <div class="post-navs row">
      
        <div class="col-md-6 post-nav">
          <h3 class="section-header">
            Older
            <!--<span class="text-muted"> &middot; </span>-->
            <a href="/archive">View Archive (30)</a>
          </h3>
          <h2 class="post-title-link"><a href="/2017/03/29/pandas-read_csv-epoch/">pandas: read_csv() and epoch time</a></h2>
          <p class="preview">Given a CSV file that contains dates formatted as <a href="https://en.wikipedia.org/wiki/Unix_time">epoch time</a>
how do we convert them into <code class="highlighter-rouge">datetime</code> objects within a pandas dataframe?</p>


        </div>
      
      
        <div class="col-md-6 post-nav">
          <h3 class="section-header">
            Newer
            
          </h3>
          <h2 class="post-title-link"><a href="/2017/04/01/web-scraping-steamcommunity.com/">Web scraping: steamcommunity.com</a></h2>
          <p class="preview">Given a URL to a steamcommunity.com group page we would like to access
the profile page of each member. The example URL given was 
<a href="http://steamcommunity.com/groups/KeyVendorNet">http://steamcommunity.com/groups/KeyVendorNet</a>.</p>


        </div>
      
    </div>
  

<div class="post-footer">
  <center><strong>Hello? Is it me you're looking for?</strong> 
<p>
  <a href="mailto:karl.genockey.thornton@gmail.com">e-mail</a>
  <a href="https://github.com/kaijento">github</a>
  <strong>♥</strong> 
  <a href="https://paypal.me/kaijento">paypal</a>
  <a href="https://twitter.com/kaijento">twitter</a> 
</p>
</center>

</div>

          </div>
        
      </div>
      <div class="row footer">
        <div class="col-sm-12 text-center">
          &copy;2017.
Built with <a href="http://jekyllrb.com/">Jekyll</a> and
<a href="https://github.com/ellekasai/shiori">Shiori Theme</a>.

        </div>
      </div>
    </div>
    
  </body>
</html>
